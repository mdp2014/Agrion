<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agrion √† fer de lance ‚Äî Animations JavaScript</title>
  <style>
    /* Reset & typographie de base */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f8ff;
      overflow-x: hidden;
    }
    header, footer {
      background: #006400; color: #fff; text-align: center;
      padding: 1rem; position: sticky; width: 100%;
    }
    header { top: 0; }
    footer { bottom: 0; margin-top: 2rem; }
    nav ul { display: flex; justify-content: center; gap: 2rem; }
    nav a { color: #fff; text-decoration: none; font-weight: bold; }

    main { padding: 2rem; }
    section { margin-bottom: 4rem; opacity: 0; }

    .card {
      display: flex; align-items: center; gap: 2rem;
      background: #fff; padding: 2rem; border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      transform: scale(0.8);
    }
    .card img { width: 200px; border-radius: 8px; }

    .threats li { margin: .5rem 0; }

    /* Pour le canvas particules */
    #particle-canvas {
      position: fixed; top: 0; left: 0; pointer-events: none;
      z-index: -1;
    }
  </style>
</head>
<body>
  <canvas id="particle-canvas"></canvas>

  <header>
    <h1 id="logo">üêû Agrion √† fer de lance</h1>
    <nav>
      <ul>
        <li><a href="#presentation">Pr√©sentation</a></li>
        <li><a href="#habitat">Habitat</a></li>
        <li><a href="#menaces">Menaces</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="presentation">
      <h2>Pr√©sentation</h2>
      <div class="card">
        <img src="agrion.jpg" alt="Agrion" />
        <p>L‚Äô<strong>Agrion √† fer de lance</strong> (Ischnura elegans) est une demoiselle bleue et noire d‚Äôenviron 30 mm.</p>
      </div>
    </section>

    <section id="habitat">
      <h2>Habitat</h2>
      <p>Zones humides, √©tangs et mares calmes riches en v√©g√©tation aquatique.</p>
    </section>

    <section id="menaces">
      <h2>Menaces & Protection</h2>
      <ul class="threats">
        <li>Destruction des zones humides</li>
        <li>Pollution de l‚Äôeau</li>
        <li>Changements climatiques</li>
        <li>Usage intensif de pesticides</li>
      </ul>
      <p>Pr√©server, restaurer et sensibiliser pour prot√©ger l‚Äôesp√®ce.</p>
    </section>
  </main>

  <footer>
    &copy; 2025 Protection de la Biodiversit√©
  </footer>

  <script>
  /* ================================
     1. Effet de particules JS 
  ==================================*/
  const canvas = document.getElementById('particle-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, particles = [];
  function initCanvas() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
    particles = Array.from({length: 120}, () => ({
      x: Math.random()*W,
      y: Math.random()*H,
      r: Math.random()*2+1,
      dx: (Math.random()-0.5)*1.5,
      dy: (Math.random()-0.5)*1.5
    }));
  }
  function drawParticles() {
    ctx.clearRect(0,0,W,H);
    particles.forEach(p => {
      p.x += p.dx; p.y += p.dy;
      if(p.x<0||p.x>W) p.dx*=-1;
      if(p.y<0||p.y>H) p.dy*=-1;
      ctx.beginPath();
      ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
      ctx.fillStyle = 'rgba(0,100,0,0.2)';
      ctx.fill();
    });
    requestAnimationFrame(drawParticles);
  }
  window.addEventListener('resize', initCanvas);
  initCanvas(); drawParticles();

  /* ======================================
     2. Apparition des sections au scroll
  ========================================*/
  const sections = document.querySelectorAll('main section');
  const obs = new IntersectionObserver((ent, obsr) => {
    ent.forEach(e => {
      if (e.isIntersecting) {
        e.target.style.transition = 'opacity 1s, transform 1s';
        e.target.style.opacity = 1;
        e.target.style.transform = 'translateY(0)';
        obsr.unobserve(e.target);
      }
    });
  }, { threshold: 0.25 });
  sections.forEach(sec => {
    sec.style.transform = 'translateY(30px)';
    obs.observe(sec);
  });

  /* ==================================
     3. Logo qui rebondit en continu
  ====================================*/
  const logo = document.getElementById('logo');
  let angle = 0;
  function bounceLogo() {
    angle += 0.03;
    logo.style.transform = 'translateY(' + Math.sin(angle)*10 + 'px)';
    requestAnimationFrame(bounceLogo);
  }
  bounceLogo();

  /* ============================================
     4. Carte qui pulse et tourne au hover
  ==============================================*/
  const card = document.querySelector('.card');
  card.addEventListener('mouseenter', () => {
    card.animate([
      { transform: 'scale(1)' },
      { transform: 'scale(1.05) rotate(5deg)' },
      { transform: 'scale(1)' }
    ], { duration: 800, iterations: 1 });
  });

  /* ========================================
     5. Nav links qui ondulent au survol JS
  ==========================================*/
  document.querySelectorAll('nav a').forEach(a => {
    a.addEventListener('mouseover', () => {
      a.animate([
        { transform: 'translateY(0)' },
        { transform: 'translateY(-8px)' },
        { transform: 'translateY(0)' }
      ], { duration: 400, iterations: 1 });
    });
  });

  /* ====================================
     6. Texte typewriter au clic JS
  ======================================*/
  function typeWriter(el) {
    const txt = el.textContent;
    el.textContent = '';
    let i = 0;
    const interval = setInterval(() => {
      el.textContent += txt.charAt(i++);
      if (i > txt.length) clearInterval(interval);
    }, 50);
  }
  document.querySelectorAll('section p').forEach(p => {
    p.addEventListener('click', () => typeWriter(p));
  });

  /* =============================================
     7. Effet parallax sur image au scroll JS
  ===============================================*/
  window.addEventListener('scroll', () => {
    const img = document.querySelector('.card img');
    const offset = window.scrollY;
    img.style.transform = `translateY(${offset * 0.1}px) rotate(${offset * 0.02}deg)`;
  });
  </script>
</body>
</html>
